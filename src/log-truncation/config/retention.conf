# Log Rotation Configuration
# Format: KEY=VALUE (no spaces around =)
# Sizes: Use logrotate syntax (M=megabytes, G=gigabytes)
# Times: Use logrotate syntax (d=days, w=weeks, m=months)
# Inspired by: /etc/codeswarm-tidyup.conf (will be decommissioned)

# === GLOBAL DEFAULTS ===
DEFAULT_ROTATE_COUNT=7
DEFAULT_MAX_SIZE=25M
DEFAULT_COMPRESS=true
DEFAULT_DELAY_COMPRESS=true
DEFAULT_COPY_TRUNCATE=true

# === ALLOY FILE SOURCES ===
# Tool sink logs
TOOL_SINK_PATH="/home/luce/_logs/*.log"
TOOL_SINK_ROTATE_COUNT=7
TOOL_SINK_MAX_SIZE=25M
TOOL_SINK_FREQUENCY=daily

# Telemetry JSONL
TELEMETRY_PATH="/home/luce/_telemetry/*.jsonl"
TELEMETRY_ROTATE_COUNT=7
TELEMETRY_MAX_SIZE=25M
TELEMETRY_FREQUENCY=daily

# CodeSwarm MCP logs
MCP_LOGS_PATH="/home/luce/apps/vLLM/_data/mcp-logs/*.log"
MCP_LOGS_ROTATE_COUNT=7
MCP_LOGS_MAX_SIZE=25M
MCP_LOGS_FREQUENCY=daily

# NVIDIA telemetry
NVIDIA_TELEM_PATH="/home/luce/apps/vLLM/logs/telemetry/nvidia/*.jsonl /home/luce/apps/vLLM/logs/telemetry/nvidia/burst/*.jsonl"
NVIDIA_TELEM_ROTATE_COUNT=7
NVIDIA_TELEM_MAX_SIZE=25M
NVIDIA_TELEM_FREQUENCY=daily

# === DEVELOPMENT TOOLS ===
# VSCode Server
VSCODE_PATH="/home/luce/.vscode-server/**/*.log /home/luce/.vscode-server/**/log.txt"
VSCODE_ROTATE_COUNT=4
VSCODE_MAX_SIZE=50M
VSCODE_FREQUENCY=weekly

# Code-Server
CODE_SERVER_PATH="/home/luce/.local/share/code-server/logs/*.log"
CODE_SERVER_ROTATE_COUNT=4
CODE_SERVER_MAX_SIZE=50M
CODE_SERVER_FREQUENCY=weekly

# === SYSTEM LOGS (OPTIONAL) ===
# Samba
SAMBA_ENABLED=false
SAMBA_PATH="/var/log/samba/*.log"
SAMBA_ROTATE_COUNT=4
SAMBA_MAX_SIZE=50M
SAMBA_FREQUENCY=weekly

# === SYSTEMD JOURNAL ===
JOURNAL_MAX_USE=1G
JOURNAL_MAX_RETENTION=7d
JOURNAL_MAX_FILE_SIZE=100M
JOURNAL_FORWARD_TO_SYSLOG=yes

# === HEALTH MONITORING (from codeswarm-tidyup) ===
# Enable health checks and disk usage tracking
ENABLE_HEALTH_CHECKS=true

# Alert thresholds
DISK_USAGE_ALERT_THRESHOLD=85
DISK_FREE_ALERT_THRESHOLD=50

# Track consecutive failures before alerting
HEALTH_FAILURE_THRESHOLD=3

# Alert if execution time exceeds this (seconds)
EXECUTION_TIME_ALERT_THRESHOLD=300

# === PATHS ===
# User home directory
USER_HOME=/home/luce

# Log file location for rotation operations
LOG_FILE=/var/log/log-truncation.log

# Health state tracking file
HEALTH_STATE_FILE=/var/lib/log-truncation/health.state

# === FILE OWNERSHIP ===
# User/group for rotated files (used by logrotate 'su' directive)
LOG_OWNER_USER=luce
LOG_OWNER_GROUP=luce
