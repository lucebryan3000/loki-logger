global:
  scrape_interval: 15s
  scrape_timeout: 10s
  evaluation_interval: 15s

alerting:
  alertmanagers: []  # Prometheus notifications intentionally disabled in sandbox; Grafana alerting is canonical delivery path.

rule_files:
- /etc/prometheus/rules/*.yml
scrape_configs:
- job_name: prometheus
  static_configs:
  - targets:
    - prometheus:9090
- job_name: host-monitor
  static_configs:
  - targets:
    - host-monitor:9100
- job_name: docker-metrics
  static_configs:
  - targets:
    - docker-metrics:8080
  metric_relabel_configs:
  - source_labels:
    - __name__
    regex: container_tasks_state|container_memory_failures_total|container_fs_io_time_seconds_total|container_network_.*_dropped_total|container_network_.*_errors_total
    action: drop
- job_name: loki
  static_configs:
  - targets:
    - loki:3100
- job_name: alloy
  static_configs:
  - targets:
    - alloy:12345
- job_name: wireguard
  static_configs:
  - targets:
    - 172.20.0.1:9586
    labels:
      service: wireguard
      interface: wg0
- job_name: grafana
  static_configs:
  - targets:
    - grafana:3000
